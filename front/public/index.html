<html>
    <head>
        {{> head}}
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
        html, body {
            width: 100%;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: linear-gradient(135deg,#ffe082 0%,#fff8e1 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .main-content {
            width: 95vw;
            max-width: 500px;
            min-width: 0;
            background: rgba(255,255,255,0.95);
            border-radius: 24px;
            box-shadow: 0 0 32px #ffe082,0 0 8px #a47551;
            padding: 6vw 4vw 4vw 4vw;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .main-content input, .main-content button {
            font-size: 1.1em;
        }
        @media (max-width: 600px) {
            .main-content {
                max-width: 98vw;
                padding: 8vw 2vw 6vw 2vw;
            }
            .main-content input {
                width: 90vw !important;
                font-size: 1em;
            }
            .main-content button {
                font-size: 1em;
                padding: 10px 18px;
            }
            .main-content #aiDropdown {
                min-width: 140px !important;
            }
            .main-content #aiPlayBtn {
                padding: 12px 18px !important;
                font-size: 1em !important;
            }
        }
        </style>
    </head>
    <body style="margin:0; min-height:100vh; background:linear-gradient(135deg,#ffe082 0%,#fff8e1 100%); display:flex; flex-direction:column; justify-content:center; align-items:center;">
        <div style="text-align:center; margin-bottom:40px;">
            <div style="font-size:3.5em; font-family:'Segoe UI',sans-serif; font-weight:bold; color:#8d5524; text-shadow:0 0 24px #ffe082,0 0 8px #fff,0 0 2px #a47551; letter-spacing:2px;">WELCOME TO CHESS GAME</div>
            <div style="font-size:2em; font-family:'Segoe Script',cursive; color:#a47551; margin-top:10px; text-shadow:0 0 12px #fff8e1,0 0 2px #8d5524;">BY ATISH PAUL</div>
            <div style="font-size:2em; font-family:'Segoe Script',cursive; color:#a47551; margin-top:10px; text-shadow:0 0 12px #fff8e1,0 0 2px #8d5524;">select a room of your choice assigning any room number and ask your friend to join to room , enjoy plaing with us</div>
        </div>
    <div class="main-content" style="position:relative;">
            <div id="ai-play-container" style="margin-bottom:32px; margin-top:12px;">
                <button id="aiPlayBtn" style="font-size:1.3em; padding:16px 40px; border-radius:12px; border:none; background:#fff176; color:#8d5524; font-weight:bold; box-shadow:0 0 16px #ffe082,0 0 4px #a47551; cursor:pointer; transition:background 0.2s; position:relative;">Play with AI</button>
                <div id="aiDropdown" style="display:none; position:absolute; left:50%; transform:translateX(-50%); top:60px; background:#fffde7; border-radius:12px; box-shadow:0 0 16px #ffe082,0 0 4px #a47551; z-index:10; min-width:220px;">
                    <div class="ai-option" data-diff="easy" style="padding:16px 0; font-size:1.1em; color:#8d5524; cursor:pointer; border-bottom:1px solid #ffe082;">Easy</div>
                    <div class="ai-option" data-diff="intermediate" style="padding:16px 0; font-size:1.1em; color:#8d5524; cursor:pointer; border-bottom:1px solid #ffe082;">Intermediate</div>
                    <div class="ai-option" data-diff="difficult" style="padding:16px 0; font-size:1.1em; color:#8d5524; cursor:pointer;">Difficult</div>
                </div>
            </div>
            <div style="font-size:2em; font-weight:bold; color:#8d5524; margin-bottom:24px; text-shadow:0 0 8px #ffe082;">Game code</div>
            <input type="text" id="codeInput" style="font-size:1.5em; padding:12px 24px; border-radius:8px; border:2px solid #ffe082; margin-bottom:24px; width:260px; box-shadow:0 0 8px #ffe082; outline:none;">
            <div style="display:flex; gap:20px; margin-bottom:16px;">
                <button id="createGame" style="font-size:1.2em; padding:12px 32px; border-radius:8px; border:none; background:#ffe082; color:#8d5524; font-weight:bold; box-shadow:0 0 8px #ffe082,0 0 2px #a47551; cursor:pointer; transition:background 0.2s;">Create game</button>
                <button id="joinGame" style="font-size:1.2em; padding:12px 32px; border-radius:8px; border:none; background:#8d5524; color:#fff; font-weight:bold; box-shadow:0 0 8px #a47551,0 0 2px #ffe082; cursor:pointer; transition:background 0.2s;">Join game</button>
            </div>
            <div style="color: red; font-size:1.1em; min-height:1.5em; margin-bottom:8px;" id="errorMessage"></div>
        </div>
        <div style="margin-top:40px; font-size:1.5em; color:#a47551; font-family:'Segoe Script',cursive; text-shadow:0 0 8px #ffe082; letter-spacing:2px;">MADE WITH LOVE</div>
        <div style="margin-top:40px; font-size:1.5em; color:#a47551; font-family:'Segoe Script',cursive; text-shadow:0 0 8px #c4aa5d; letter-spacing:2px;">Thank you</div>
        <script>
            // AI Play Dropdown logic
            const aiBtn = document.getElementById('aiPlayBtn');
            const aiDropdown = document.getElementById('aiDropdown');
            if (aiBtn && aiDropdown) {
                aiBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    aiDropdown.style.display = aiDropdown.style.display === 'block' ? 'none' : 'block';
                });
                document.addEventListener('click', function(e) {
                    if (aiDropdown.style.display === 'block') {
                        aiDropdown.style.display = 'none';
                    }
                });
                aiDropdown.addEventListener('click', function(e) { e.stopPropagation(); });
                aiDropdown.querySelectorAll('.ai-option').forEach(opt => {
                    opt.addEventListener('click', function() {
                        const diff = this.getAttribute('data-diff');
                        aiDropdown.style.display = 'none';
                        window.location.replace(`/ai?difficulty=${diff}`);
                    });
                });
            }
            $('#createGame').on('click', function() {
                window.location.replace('/white?code=' + $('#codeInput').val());
            });
            $('#joinGame').on('click', function() {
                window.location.replace('/black?code=' + $('#codeInput').val());
            });
            var urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('error') == 'invalidCode') {
                $('#errorMessage').text('Invalid invite code');
            }
        </script>
    </body>
</html>